# 概要

Playwright で仮想ブラウザを立ち上げて AI に操作してもらうというサンプルプログラムになります

# 環境構築

1.

`node: 20.0.0`を入れて設定します

僕は`nodenv`で入れましたがこの辺は自由です

2.

```
npm install
```

3.

`.env.example`を参考にして`.env`を作成します

OpenAI の API を設定します。

# サンプルの説明

## 注意

サンプルを実行すると OpenAI の API が使用されるため料金が発生します

## サンプルの概要

`docs/sample.html`の html をブラウザで操作する形になります

`docs/sample.html`には青、黄、赤の 3 つのボタンが存在しています。これらのボタンを押すと背景色がボタンの色になります。

このサンプルは

スクリーンショットを撮って AI に渡して、背景色を見てもらいボタンを押して背景色を適切に変える

というものになります。具体的には`src/app/sample_operator_browser.ts`にあるプロンプトの通りで下記の操作が行われます。

```
- 背景が白場合はセレクタ".button-x"のボタンをクリック
- 背景が青色の場合はセレクタ".button-y"のボタンをクリック
- 背景が黄色の場合はセレクタ".button-z"のボタンをクリック
- 背景が赤色の場合はセレクタ".button-x"のボタンをクリック
```

## サンプルの動かし方

1.

```
npx ts-node -r tsconfig-paths/register src/app/sample_operator_browser.ts
```

2.

1 のコマンド実行するとブラウザが立ち上がる

2.

`docs/sample.html`の**フルパス**を取得し、立ち上がったブラウザに入力してページを表示する。

**相対パス**ではなくて**フルパス**なので注意です

3.

ターミナルでエンターを押す

4.

ブラウザの背景が下記のように変化すれば OK

```
白->青->黄->赤->青->、、、、
```

5.

処理を止めるにはターミナルで`Ctrl + C`

# フォルダの説明

- `src/app`: アプリケーションのプログラムを格納するフォルダ
- `src/config`: 設定のプログラムを格納するフォルダ
- `src/definitions`: interface や type を格納するフォルダ
- `services`: ロジックなどのプログラムを格納するフォルダ
- `data/prompts`: プロンプト履歴格納フォルダ
- `data/screenshots`: スクリーンショット履歴格納フォルダ

# その他

1. repomix コマンド

```
npx repomix
```

このプロジェクト全てのコードが`repomix-output.xml`に出力されます

AI に投げるときにでも使用してください

2. format & lint

```
npm run fix
```
