どのように Neo4j のデータを作成するといいのか、どのように検索するといいのかを検証しました

# 検証で使用するデータ

- LLM: ChatGPT の GPT-4o
- Neo4j に入れる対象データ

  - **WikiPedia のキアヌリーブスのページ**の文章を抜粋
  - [https://ja.wikipedia.org/wiki/キアヌ・リーブス](https://ja.wikipedia.org/wiki/%E3%82%AD%E3%82%A2%E3%83%8C%E3%83%BB%E3%83%AA%E3%83%BC%E3%83%96%E3%82%B9)

- 質問
  - キアヌ・リーブスが国際的スターとなるきっかけとなった映画は何ですか？
  - ハートブルーという映画について教えてください

キアヌリーブス抜粋

```
俳優
レバノンで生まれ、カナダのトロントで育った。9歳のとき、演劇『くたばれ!ヤンキース』で舞台出演。本人は少年時代を振り返り「僕はサニー・チバ（千葉真一）の映画とともに育ったようなものなんだ」と語っている[3]。この頃の影響がアクション映画への思い入れとなっていく[3]。

1989年に主演を務めたコメディ映画『ビルとテッドの大冒険』がヒット、続編も制作され、キアヌは「テッド役の 20代の俳優」として世間に認知されるようになる。1991年にはパトリック・スウェイジとの共演で『ハートブルー』、そして親友のリヴァー・フェニックスと共に『マイ・プライベート・アイダホ』に出演した。

1994年の映画『スピード』の大ヒットにより国際的スターとなった。続く『スピード2』にも出演オファーがあったが　『ディアボロス/悪魔の扉』と『死にたいほどの夜』に専念するために断っている。

1999年の映画『マトリックス』が世界的に大ヒットし再ブレイク、3部作に主演し、人気を不動のものとした。

2014年に、米中合作映画『ファイティング・タイガー』でメインキャストとして出演するとともに監督デビューした[4]。また、同年には伝説の殺し屋役に扮したアクション作『ジョン・ウィック』が公開。大ヒットを記録してシリーズ化された（2023年現在第4作までが公開。スピンオフ作品製作決定）。

2020年には、出世作『ビルとテッド』シリーズの約30年ぶりとなる最新作、『ビルとテッドの時空旅行 音楽で世界を救え!』が公開された。

2021年12月には、代表作の一つである『マトリックス』シリーズの続編『マトリックス レザレクションズ』が公開、約18年ぶりに主役のトーマス・A・アンダーソン / ネオを演じた。同年、コミック『BRZRKR』出版を予定しており、これに基づき主演した映画をNetflixで配信予定である[5]。さらにこれに基づくアニメシリーズでは声優を務める予定である。

音楽
1991年に結成されたグランジ・ロック・バンドの「ドッグスター」ではベースを担当し、好んでフェンダー製のプレシジョン・ベースを弾いている。

商業的には決して大きなものはなく、同バンドはアルバム2枚を発表したが、2002年10月の来日公演を最後に活動休止した。その公演は岡山県倉敷市で行われ、1万人以上の観客を集めた。その後、キアヌは「ベッキー」という別のバンドでもベースを弾いていたが、2006年には音楽活動を取りやめたことが報じられた[6]。

2022年にドッグスターは活動を再開し、2023年5月のアメリカでのライブを封切りに、9月には大阪・横浜で来日公演をした[2]。

ミュージック・ビデオ
1991年にはポーラ・アブドゥルの「あふれる想い」のミュージックビデオに相手役として出演。

人物

2019年、サンパウロにてサインするキアヌ・リーブス。彼は左利きである。
好尚
上述のとおり千葉真一の熱狂的なファンで[3][7]、「（千葉主演の）『激突! 殺人拳』からアクションと芝居を学んだ。僕は映画用のカンフーならできるけど、サニー千葉は実際に人をボコボコにできる。情熱を感じる」と受けた影響を語っており、主演映画『ジョン・ウィック』のプロモーションで来日した2015年10月に千葉と待望の対面を果たした際には、"Oh my god!" を連発[8]。千葉へ低頭しながら「ハジメマシテ、マエストロ（巨匠）！」と固い握手を交わし、挨拶した[8]。キアヌは「あなたはキャラクターを演じるだけでなく、そこにアクションを盛り込んだ。屈強なキャラクターにもあなたが演じると心が感じられる」と身振り手振りを交えながら、終始嬉しそうに大はしゃぎの様子だった[8]。

日本文化好きでも知られ[9]、帝国ホテルが大のお気に入りである。映画『JM』では「洗濯を頼みたい。帝国ホテルで頼むような洗濯だ。東京の……」というアドリブを入れた。ラーメンが大好きで、中でも味噌ラーメンがお気に入りである。来日した時には必ずラーメン屋に立ち寄り、ハシゴすることもしばしばで贔屓の店まである。

キアヌは残りの人生で最も聴きたい曲はどれか？の質問に対し、何度か呻きながら首を振った後、イアン・カーティスが亡くなった翌月にリリースされたジョイ・ディヴィジョンの“Love Will Tear Us Apart”を挙げている。

オートバイ好きでレースに出場することも多く[3]、ノートン製のバイク（コマンド750、コマンド850）2台の他、ハーレー・ダヴィッドソン、オフロード用のバイクなど複数台のバイクを所有しており、バイクに乗る姿が目撃されている。一方で転倒や事故も数回起こしており、特に『マトリックス』のクランクイン前に首や脊椎を痛める大事故を起こし、手術が必要なほどの重傷を負った。術後、首にギプスをしたまま映画のアクションシーンの訓練をしている姿が『マトリックス』の特典映像にも見られた。車は黒いポルシェを所有しているが、友人と出かける時に乗る程度で埃をかぶっていることが多いらしい。『マトリックス』三部作が完結したあと、「映画の成功は特殊効果チームのおかげ」と言い、映画に関わったクリエーターたち全員にハーレー・ダヴィッドソンをプレゼントしたという逸話もある。2015年7月26日に開催された鈴鹿8時間耐久ロードレースのために来日し、決勝日前に自身がプロデュースしている『Arch Motorcycle（英語版）』を繰ってサーキットを疾走した[10]。レース当日にも前日同様に自らのマシンでサーキットを走った上、8耐レースのスターターとしてスターティングフラッグを振り、鈴鹿サーキット内でトークショーも開催した[11]。

映画『リトル・ブッダ』では、ゴータマ・シッダールタ役を演じたが、キアヌ本人は仏教に関心はあるとしつつ無宗教であると述べている[12][13]。
```

# 1. 文章から Neo4j のデータを作成する検証

[1. 文章からグラフを作成する検証](https://github.com/campbel2525/neo4j/blob/main/docs/0_%E6%A4%9C%E8%A8%BC/2_1_%E6%96%87%E7%AB%A0%E3%81%8B%E3%82%89%E3%82%B0%E3%83%A9%E3%83%95%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E6%A4%9C%E8%A8%BC.md)

# 2. 検索の方法を検証

[2. 検索の方法を検証](https://github.com/campbel2525/neo4j/blob/main/docs/0_%E6%A4%9C%E8%A8%BC/2_2_%E6%A4%9C%E7%B4%A2%E3%81%AE%E6%96%B9%E6%B3%95%E3%82%92%E6%A4%9C%E8%A8%BC.md)

# 3. 最終的な回答を出す検証

[3. 最終的な回答を出す検証](https://github.com/campbel2525/neo4j/blob/main/docs/0_%E6%A4%9C%E8%A8%BC/2_3_%E6%9C%80%E7%B5%82%E7%9A%84%E3%81%AA%E5%9B%9E%E7%AD%94%E3%82%92%E5%87%BA%E3%81%99%E6%A4%9C%E8%A8%BC.md)

# その他検証ポイント

- LLM をふんだんに使用したがもっといいプロンプトはないかどうか。

- 情報はノードにするのか、エンティティにするのかよく考えた方がいい。

  - この辺は明確な答えはなくどんな種類の検索システムを作りたいかによると思う。つまりドメイン知識をふんだんに活用する形になると思う。
  - エンティティに情報を増やしてしまうとグラフの意味があまりなくなってしまうし、ノードを増やしすぎると検索が難しくなってしまう

    例えば、

    ```
    キアヌリーブス
      国籍: カナダ
      利き手: 左利き
    ```

    ととるのか

    ```
    カナダ　<- キアヌリーブス  -> 左利き
    ```

    とデータを作るのか。

  - じゃあエンティティにも持つがリレーションもするのはどうだろか？

    ⇒ Gemini は推奨しないとのこと。データの 2 重管理が起き、不整合が起こる可能性があるとのこと ← 確かにその通りだと思う。

    ```
    カナダ　<- キアヌリーブス(カナダ、左利き)  -> 左利き
    ```

- エンティティの項目はこちらで決めた方がいいのか？それともきめの方がいいのか？

  - こちらで定義した方が精度上がりそうだが、色々なジャンルの文章に対応できなくなる可能性あるのでその辺も検証

- 文章から情報抽出する際の文章は 1 文ずつの方がいいのか？まとめた方がいいのか？どのくらいまとめれるか？

  - 個人的にはラベルの付け方を一意にした方がいいため 1 分ずつではなくなるべくまとめた方がいいと思う。とはいえ全文は送れないので適切に分けるのが大事
  - 情報を抽出際に現在 Neo4j に入っているスキーマデータを渡すのがいいと思う。

- 今回は「情報を JSON で抽出」と「Cypher の作成」の工程を分けたが 1 回のプロンプトでできないかどうか

  - できそうな気がする
  - Gmini は分けない方がいいと言っていた。
    - 役割を明確にした方がデバッグがしやすいとのこと。

- どのモデルを使用するのが適切か

  - 大量に LLM を実行するためなるべく安いモデルがいい

- 文章から情報抽出する方法はいくつかありそうなので他の方法も検討してみる

  - 機械学習ベースの NER ライブラリ活用
  - Hugging Face Transformers で高性能モデル
  - LLM を使う方法(今回はこの方法)

- エンティティの抽出、サイファーの出力の際になにか前処理した方がいいかどうか
  - 重複を省いたほうがいい？
    - 問題なさそう
  - 全て英語にしたほうがいい？おそらく「りんご」と「apple」は区別されてしまうと思う。

# 参考

1

ノード全削除

```
MATCH (n) DETACH DELETE n;
```
