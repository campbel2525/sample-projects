# 検証概要

文章からエンティティを抽出する方法 LLM を使用する方法はいくつかあるようですが、LLM が一番良さそうなため今回は LLM を使用する方法でためしてみました。この辺りは要検証した方がいいと思う

検証は以下の方針で進めます。

# 検証手順

1. 文章から情報抽出
   1. 文章を一括で LLM に渡して情報を JSON で出力してもらう。ラベルなどの項目は適宜適切に抜き出しもらう
2. 文章情報から Cypher 作成
   1. 抜き出した JSON をもとに LLM にノード作成用の Cypher を作ってもらう
   2. Cypher は単純なクエリのため LLM で問題ないはず。
3. Cypher を実行して確認を行う

# 文章から情報抽出

文章を一括で LLM に渡して情報を JSON で出力してもらいます。ラベルなどの項目は適宜適切に抜き出しもらうようにします

課題

- データをノードとして定義するのか。プロパティとして定義するのか悩むところ。今回はグラフ DB で使用するため、プロパティは最低限として、ノードを増やすのがよさそう

最終プロンプト

````
# 命令

あなたは、GraphRAGに最適なナレッジグラフの構造を設計する専門家です。
以下の**「モデリングの基本方針」**と**「出力JSONの仕様」**に厳密に従い、入力された文章からグラフ構造を定義したJSONを生成してください。

# モデリングの基本方針

グラフの目的は、単なる情報のリストではなく、**LLMが「繋がり」を効率的に辿って答えを発見できる「思考の地図」を構築することです。以下の判断基準を最優先**してください。

1. **ハブ・ノード化の鉄則 (The Iron Rule of Hub-Nodification):**
ある情報（例：「エンジニア」という職業、「東京」という場所）について考える。もし、その情報を基点として**「他に同じものを持つ（または関連する）エンティティは何か？」という問いが将来的に成立しうる**ならば、それは**必ず独立した「ハブ・ノード」**としなければならない。これは、グラフの価値を決定づける最も重要なルールです。
2. **プロパティとして残す条件 (Conditions for Remaining a Property):**
上記に当てはまらず、そのエンティティを個別に説明するための**具体的な属性値**であり、他のエンティティとの共通の繋がりを探す起点になりにくい情報のみ、`properties`として保持します。（例：身長や体重などの**数値**、ウェブサイトの**URL**、**true/false** のフラグ、**固有名詞ではない一般的な説明文**など）
3. **主要エンティティの扱い (Handling of Primary Entities):**
人物、組織、製品、イベントなどの文章の主題となるエンティティは、当然ノードとします。

# 出力JSONの仕様

- ルート要素は`nodes`と`relationships`の2つのキーを持つJSONオブジェクトとします。
- **nodes**: オブジェクトの配列。各オブジェクトは`id`（一意の名前）、`label`（カテゴリ）、`properties`（属性オブジェクト）のキーを持ちます。
- **relationships**: オブジェクトの配列。各オブジェクトは`source`（始点ノードのid）、`target`（終点ノードのid）、`type`（関係性の種類）のキーを持ちます。

# 具体例

- **入力文章:**`A-社のエンジニアである田中太郎は、2023年に東京で開催されたカンファレンスでPythonについて発表した。`
- **望ましい出力JSON:**

    ```
    {
      "nodes": [
        { "id": "田中太郎", "label": "Person", "properties": {} },
        { "id": "A-社", "label": "Company", "properties": {} },
        { "id": "エンジニア", "label": "Occupation", "properties": {} },
        { "id": "カンファレンス", "label": "Event", "properties": {} },
        { "id": "2023", "label": "Year", "properties": {} },
        { "id": "東京", "label": "City", "properties": {} },
        { "id": "Python", "label": "Topic", "properties": {} }
      ],
      "relationships": [
        { "source": "田中太郎", "target": "A-社", "type": "WORKS_FOR" },
        { "source": "田中太郎", "target": "エンジニア", "type": "HAS_OCCUPATION" },
        { "source": "田中太郎", "target": "カンファレンス", "type": "PRESENTED_AT" },
        { "source": "カンファレンス", "target": "2023", "type": "HELD_IN_YEAR" },
        { "source": "カンファレンス", "target": "東京", "type": "HELD_IN_CITY" },
        { "source": "カンファレンス", "target": "Python", "type": "FEATURED_TOPIC" }
      ]
    }

    ```

    *(この例では、「エンジニア」という職業も「他にエンジニアはいるか？」という問いが成立するため、ハブ・ノードとして分離しています)*


# 入力文章

<入力文章>
````

実行結果

```json
{
  "nodes": [
    {
      "id": "キアヌ・リーブス",
      "label": "Person",
      "properties": { "利き手": "左利き" }
    },
    { "id": "俳優", "label": "Occupation", "properties": {} },
    { "id": "レバノン", "label": "Country", "properties": {} },
    { "id": "トロント", "label": "City", "properties": {} },
    { "id": "サニー・チバ", "label": "Person", "properties": {} },
    { "id": "アクション映画", "label": "Genre", "properties": {} },
    {
      "id": "ビルとテッドの大冒険",
      "label": "Movie",
      "properties": { "公開年": "1989" }
    },
    { "id": "テッド", "label": "Character", "properties": {} },
    {
      "id": "ハートブルー",
      "label": "Movie",
      "properties": { "公開年": "1991" }
    },
    { "id": "パトリック・スウェイジ", "label": "Person", "properties": {} },
    {
      "id": "マイ・プライベート・アイダホ",
      "label": "Movie",
      "properties": { "公開年": "1991" }
    },
    { "id": "リヴァー・フェニックス", "label": "Person", "properties": {} },
    { "id": "スピード", "label": "Movie", "properties": { "公開年": "1994" } },
    { "id": "ディアボロス/悪魔の扉", "label": "Movie", "properties": {} },
    { "id": "死にたいほどの夜", "label": "Movie", "properties": {} },
    { "id": "マトリックス", "label": "MovieSeries", "properties": {} },
    { "id": "ジョン・ウィック", "label": "MovieSeries", "properties": {} },
    {
      "id": "ファイティング・タイガー",
      "label": "Movie",
      "properties": { "公開年": "2014" }
    },
    { "id": "BRZRKR", "label": "Comic", "properties": {} },
    { "id": "Netflix", "label": "Company", "properties": {} },
    {
      "id": "ドッグスター",
      "label": "Band",
      "properties": { "ジャンル": "グランジ・ロック" }
    },
    { "id": "フェンダー", "label": "Brand", "properties": {} },
    { "id": "岡山県倉敷市", "label": "City", "properties": {} },
    { "id": "大阪", "label": "City", "properties": {} },
    { "id": "横浜", "label": "City", "properties": {} },
    { "id": "ポーラ・アブドゥル", "label": "Person", "properties": {} },
    {
      "id": "あふれる想い",
      "label": "MusicVideo",
      "properties": { "公開年": "1991" }
    },
    { "id": "帝国ホテル", "label": "Hotel", "properties": {} },
    { "id": "味噌ラーメン", "label": "Food", "properties": {} },
    { "id": "ジョイ・ディヴィジョン", "label": "Band", "properties": {} },
    { "id": "Love Will Tear Us Apart", "label": "Song", "properties": {} },
    { "id": "ノートン", "label": "Brand", "properties": {} },
    { "id": "ハーレー・ダヴィッドソン", "label": "Brand", "properties": {} },
    { "id": "ポルシェ", "label": "Brand", "properties": {} },
    { "id": "Arch Motorcycle", "label": "Company", "properties": {} },
    { "id": "鈴鹿サーキット", "label": "Place", "properties": {} },
    {
      "id": "鈴鹿8時間耐久ロードレース",
      "label": "Event",
      "properties": { "開催年": "2015" }
    },
    { "id": "リトル・ブッダ", "label": "Movie", "properties": {} },
    { "id": "仏教", "label": "Religion", "properties": {} }
  ],
  "relationships": [
    {
      "source": "キアヌ・リーブス",
      "target": "俳優",
      "type": "HAS_OCCUPATION"
    },
    { "source": "キアヌ・リーブス", "target": "レバノン", "type": "BORN_IN" },
    {
      "source": "キアヌ・リーブス",
      "target": "トロント",
      "type": "GREW_UP_IN"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "サニー・チバ",
      "type": "INSPIRED_BY"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "アクション映画",
      "type": "INTERESTED_IN"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "ビルとテッドの大冒険",
      "type": "ACTED_IN"
    },
    {
      "source": "ビルとテッドの大冒険",
      "target": "テッド",
      "type": "FEATURED_CHARACTER"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "ハートブルー",
      "type": "ACTED_IN"
    },
    {
      "source": "ハートブルー",
      "target": "パトリック・スウェイジ",
      "type": "CO_STARRED_WITH"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "マイ・プライベート・アイダホ",
      "type": "ACTED_IN"
    },
    {
      "source": "マイ・プライベート・アイダホ",
      "target": "リヴァー・フェニックス",
      "type": "CO_STARRED_WITH"
    },
    { "source": "キアヌ・リーブス", "target": "スピード", "type": "ACTED_IN" },
    {
      "source": "キアヌ・リーブス",
      "target": "ディアボロス/悪魔の扉",
      "type": "ACTED_IN"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "死にたいほどの夜",
      "type": "ACTED_IN"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "マトリックス",
      "type": "STARRED_IN"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "ジョン・ウィック",
      "type": "STARRED_IN"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "ファイティング・タイガー",
      "type": "ACTED_IN"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "ファイティング・タイガー",
      "type": "DIRECTED"
    },
    { "source": "キアヌ・リーブス", "target": "BRZRKR", "type": "CREATED" },
    { "source": "BRZRKR", "target": "Netflix", "type": "STREAMED_ON" },
    {
      "source": "キアヌ・リーブス",
      "target": "ドッグスター",
      "type": "MEMBER_OF"
    },
    { "source": "ドッグスター", "target": "フェンダー", "type": "USES_BRAND" },
    {
      "source": "ドッグスター",
      "target": "岡山県倉敷市",
      "type": "PERFORMED_IN"
    },
    { "source": "ドッグスター", "target": "大阪", "type": "PERFORMED_IN" },
    { "source": "ドッグスター", "target": "横浜", "type": "PERFORMED_IN" },
    {
      "source": "キアヌ・リーブス",
      "target": "あふれる想い",
      "type": "APPEARED_IN"
    },
    {
      "source": "あふれる想い",
      "target": "ポーラ・アブドゥル",
      "type": "FEATURED_ARTIST"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "帝国ホテル",
      "type": "FAVORITE_PLACE"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "味噌ラーメン",
      "type": "FAVORITE_FOOD"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "Love Will Tear Us Apart",
      "type": "FAVORITE_SONG"
    },
    {
      "source": "Love Will Tear Us Apart",
      "target": "ジョイ・ディヴィジョン",
      "type": "PERFORMED_BY"
    },
    { "source": "キアヌ・リーブス", "target": "ノートン", "type": "OWNS" },
    {
      "source": "キアヌ・リーブス",
      "target": "ハーレー・ダヴィッドソン",
      "type": "OWNS"
    },
    { "source": "キアヌ・リーブス", "target": "ポルシェ", "type": "OWNS" },
    {
      "source": "キアヌ・リーブス",
      "target": "Arch Motorcycle",
      "type": "FOUNDED"
    },
    {
      "source": "Arch Motorcycle",
      "target": "鈴鹿サーキット",
      "type": "RACED_AT"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "鈴鹿8時間耐久ロードレース",
      "type": "PARTICIPATED_IN"
    },
    {
      "source": "鈴鹿8時間耐久ロードレース",
      "target": "鈴鹿サーキット",
      "type": "HELD_AT"
    },
    {
      "source": "キアヌ・リーブス",
      "target": "リトル・ブッダ",
      "type": "ACTED_IN"
    },
    { "source": "キアヌ・リーブス", "target": "仏教", "type": "INTERESTED_IN" }
  ]
}
```

# 文章情報から Cypher 作成

抜き出した JSON をもとに LLM にノード作成用の Cypher を作ってもらいます

最終プロンプト

````
# 命令

あなたは、JSONデータを基に安全で効率的なCypherクエリを生成するNeo4jのエキスパートです。
入力されたJSONデータ（グラフの構造定義）を、Neo4jにデータを登録するための**Cypherクエリ**に変換してください。

# Cypher生成ルール

1. **冪等性の確保:**
ノードとリレーションシップの作成には、重複を防ぐため必ず`MERGE`を使用してください。
2. **ノードの作成と更新:**
    - ノードは `:Label {id: '...'}` の形式で`MERGE`します。
    - `properties`に属性がある場合、`ON CREATE SET`（新規作成時）と`ON MATCH SET`（既存時）の両方を使い、常にプロパティが最新の状態に保たれるようにしてください。
3. **リレーションシップの作成（最重要）:**
    - **ノード作成とリレーションシップ作成の分離:** 全てのノードを`MERGE`し終えた後、最初のリレーションシップ作成ブロックの前に、必ず `WITH true as ignored` という句を挿入してください。これにより、書き込み処理と次の読み込み処理が構文的に正しく分離されます。
    - **リレーションシップブロック間の分離:** 同様に、2つ目以降のリレーションシップを作成するブロックの前にも、必ず `WITH true as ignored` を挿入してください。
    - **ブロックの構成:** 各リレーションシップ作成ブロックは、`MATCH`文で始点と終点を特定し、その後`MERGE`文でリレーションシップを作成する構成となります。
4. **出力形式:**
最終的な出力は、実行可能な単一のCypherクエリ文のみとしてください。説明や他のテキストは不要です。

# 具体例

- **入力JSON:**

    ```
    {
      "nodes": [
        { "id": "田中太郎", "label": "Person", "properties": { "title": "エンジニア" } },
        { "id": "A-社", "label": "Company", "properties": {} },
        { "id": "東京", "label": "City", "properties": {} }
      ],
      "relationships": [
        { "source": "田中太郎", "target": "A-社", "type": "WORKS_FOR" },
        { "source": "田中太郎", "target": "東京", "type": "LIVES_IN" }
      ]
    }

    ```

- **望ましい出力Cypher:**

    ```
    // ノードのMERGE
    MERGE (n1:Person {id: '田中太郎'})
      ON CREATE SET n1.title = 'エンジニア'
      ON MATCH SET n1.title = 'エンジニア'
    MERGE (n2:Company {id: 'A-社'})
    MERGE (n3:City {id: '東京'})

    // ノード作成とリレーションシップ作成をWITHで区切る
    WITH true AS ignored

    // リレーションシップの作成 (1つ目)
    MATCH (source1:Person {id: '田中太郎'})
    MATCH (target1:Company {id: 'A-社'})
    MERGE (source1)-[:WORKS_FOR]->(target1)

    // 2つ目以降のリレーションシップを作成する前にWITHで区切る
    WITH true AS ignored

    // リレーションシップの作成 (2つ目)
    MATCH (source2:Person {id: '田中太郎'})
    MATCH (target2:City {id: '東京'})
    MERGE (source2)-[:LIVES_IN]->(target2)

    ```


# 入力JSON

<入力JSON>
````

実行結果

```
// ノードのMERGE
MERGE (n1:Person {id: 'キアヌ・リーブス'})
  ON CREATE SET n1.利き手 = '左利き'
  ON MATCH SET n1.利き手 = '左利き'
MERGE (n2:Occupation {id: '俳優'})
MERGE (n3:Country {id: 'レバノン'})
MERGE (n4:City {id: 'トロント'})
MERGE (n5:Person {id: 'サニー・チバ'})
MERGE (n6:Genre {id: 'アクション映画'})
MERGE (n7:Movie {id: 'ビルとテッドの大冒険'})
  ON CREATE SET n7.公開年 = '1989'
  ON MATCH SET n7.公開年 = '1989'
MERGE (n8:Character {id: 'テッド'})
MERGE (n9:Movie {id: 'ハートブルー'})
  ON CREATE SET n9.公開年 = '1991'
  ON MATCH SET n9.公開年 = '1991'
MERGE (n10:Person {id: 'パトリック・スウェイジ'})
MERGE (n11:Movie {id: 'マイ・プライベート・アイダホ'})
  ON CREATE SET n11.公開年 = '1991'
  ON MATCH SET n11.公開年 = '1991'
MERGE (n12:Person {id: 'リヴァー・フェニックス'})
MERGE (n13:Movie {id: 'スピード'})
  ON CREATE SET n13.公開年 = '1994'
  ON MATCH SET n13.公開年 = '1994'
MERGE (n14:Movie {id: 'ディアボロス/悪魔の扉'})
MERGE (n15:Movie {id: '死にたいほどの夜'})
MERGE (n16:MovieSeries {id: 'マトリックス'})
MERGE (n17:MovieSeries {id: 'ジョン・ウィック'})
MERGE (n18:Movie {id: 'ファイティング・タイガー'})
  ON CREATE SET n18.公開年 = '2014'
  ON MATCH SET n18.公開年 = '2014'
MERGE (n19:Comic {id: 'BRZRKR'})
MERGE (n20:Company {id: 'Netflix'})
MERGE (n21:Band {id: 'ドッグスター'})
  ON CREATE SET n21.ジャンル = 'グランジ・ロック'
  ON MATCH SET n21.ジャンル = 'グランジ・ロック'
MERGE (n22:Brand {id: 'フェンダー'})
MERGE (n23:City {id: '岡山県倉敷市'})
MERGE (n24:City {id: '大阪'})
MERGE (n25:City {id: '横浜'})
MERGE (n26:Person {id: 'ポーラ・アブドゥル'})
MERGE (n27:MusicVideo {id: 'あふれる想い'})
  ON CREATE SET n27.公開年 = '1991'
  ON MATCH SET n27.公開年 = '1991'
MERGE (n28:Hotel {id: '帝国ホテル'})
MERGE (n29:Food {id: '味噌ラーメン'})
MERGE (n30:Band {id: 'ジョイ・ディヴィジョン'})
MERGE (n31:Song {id: 'Love Will Tear Us Apart'})
MERGE (n32:Brand {id: 'ノートン'})
MERGE (n33:Brand {id: 'ハーレー・ダヴィッドソン'})
MERGE (n34:Brand {id: 'ポルシェ'})
MERGE (n35:Company {id: 'Arch Motorcycle'})
MERGE (n36:Place {id: '鈴鹿サーキット'})
MERGE (n37:Event {id: '鈴鹿8時間耐久ロードレース'})
  ON CREATE SET n37.開催年 = '2015'
  ON MATCH SET n37.開催年 = '2015'
MERGE (n38:Movie {id: 'リトル・ブッダ'})
MERGE (n39:Religion {id: '仏教'})

// ノード作成とリレーションシップ作成をWITHで区切る
WITH true AS ignored

// リレーションシップの作成 (1つ目)
MATCH (source1:Person {id: 'キアヌ・リーブス'})
MATCH (target1:Occupation {id: '俳優'})
MERGE (source1)-[:HAS_OCCUPATION]->(target1)

WITH true AS ignored
MATCH (source2:Person {id: 'キアヌ・リーブス'})
MATCH (target2:Country {id: 'レバノン'})
MERGE (source2)-[:BORN_IN]->(target2)

WITH true AS ignored
MATCH (source3:Person {id: 'キアヌ・リーブス'})
MATCH (target3:City {id: 'トロント'})
MERGE (source3)-[:GREW_UP_IN]->(target3)

WITH true AS ignored
MATCH (source4:Person {id: 'キアヌ・リーブス'})
MATCH (target4:Person {id: 'サニー・チバ'})
MERGE (source4)-[:INSPIRED_BY]->(target4)

WITH true AS ignored
MATCH (source5:Person {id: 'キアヌ・リーブス'})
MATCH (target5:Genre {id: 'アクション映画'})
MERGE (source5)-[:INTERESTED_IN]->(target5)

WITH true AS ignored
MATCH (source6:Person {id: 'キアヌ・リーブス'})
MATCH (target6:Movie {id: 'ビルとテッドの大冒険'})
MERGE (source6)-[:ACTED_IN]->(target6)

WITH true AS ignored
MATCH (source7:Movie {id: 'ビルとテッドの大冒険'})
MATCH (target7:Character {id: 'テッド'})
MERGE (source7)-[:FEATURED_CHARACTER]->(target7)

WITH true AS ignored
MATCH (source8:Person {id: 'キアヌ・リーブス'})
MATCH (target8:Movie {id: 'ハートブルー'})
MERGE (source8)-[:ACTED_IN]->(target8)

WITH true AS ignored
MATCH (source9:Movie {id: 'ハートブルー'})
MATCH (target9:Person {id: 'パトリック・スウェイジ'})
MERGE (source9)-[:CO_STARRED_WITH]->(target9)

WITH true AS ignored
MATCH (source10:Person {id: 'キアヌ・リーブス'})
MATCH (target10:Movie {id: 'マイ・プライベート・アイダホ'})
MERGE (source10)-[:ACTED_IN]->(target10)

WITH true AS ignored
MATCH (source11:Movie {id: 'マイ・プライベート・アイダホ'})
MATCH (target11:Person {id: 'リヴァー・フェニックス'})
MERGE (source11)-[:CO_STARRED_WITH]->(target11)

WITH true AS ignored
MATCH (source12:Person {id: 'キアヌ・リーブス'})
MATCH (target12:Movie {id: 'スピード'})
MERGE (source12)-[:ACTED_IN]->(target12)

WITH true AS ignored
MATCH (source13:Person {id: 'キアヌ・リーブス'})
MATCH (target13:Movie {id: 'ディアボロス/悪魔の扉'})
MERGE (source13)-[:ACTED_IN]->(target13)

WITH true AS ignored
MATCH (source14:Person {id: 'キアヌ・リーブス'})
MATCH (target14:Movie {id: '死にたいほどの夜'})
MERGE (source14)-[:ACTED_IN]->(target14)

WITH true AS ignored
MATCH (source15:Person {id: 'キアヌ・リーブス'})
MATCH (target15:MovieSeries {id: 'マトリックス'})
MERGE (source15)-[:STARRED_IN]->(target15)

WITH true AS ignored
MATCH (source16:Person {id: 'キアヌ・リーブス'})
MATCH (target16:MovieSeries {id: 'ジョン・ウィック'})
MERGE (source16)-[:STARRED_IN]->(target16)

WITH true AS ignored
MATCH (source17:Person {id: 'キアヌ・リーブス'})
MATCH (target17:Movie {id: 'ファイティング・タイガー'})
MERGE (source17)-[:ACTED_IN]->(target17)

WITH true AS ignored
MATCH (source18:Person {id: 'キアヌ・リーブス'})
MATCH (target18:Movie {id: 'ファイティング・タイガー'})
MERGE (source18)-[:DIRECTED]->(target18)

WITH true AS ignored
MATCH (source19:Person {id: 'キアヌ・リーブス'})
MATCH (target19:Comic {id: 'BRZRKR'})
MERGE (source19)-[:CREATED]->(target19)

WITH true AS ignored
MATCH (source20:Comic {id: 'BRZRKR'})
MATCH (target20:Company {id: 'Netflix'})
MERGE (source20)-[:STREAMED_ON]->(target20)

WITH true AS ignored
MATCH (source21:Person {id: 'キアヌ・リーブス'})
MATCH (target21:Band {id: 'ドッグスター'})
MERGE (source21)-[:MEMBER_OF]->(target21)

WITH true AS ignored
MATCH (source22:Band {id: 'ドッグスター'})
MATCH (target22:Brand {id: 'フェンダー'})
MERGE (source22)-[:USES_BRAND]->(target22)

WITH true AS ignored
MATCH (source23:Band {id: 'ドッグスター'})
MATCH (target23:City {id: '岡山県倉敷市'})
MERGE (source23)-[:PERFORMED_IN]->(target23)

WITH true AS ignored
MATCH (source24:Band {id: 'ドッグスター'})
MATCH (target24:City {id: '大阪'})
MERGE (source24)-[:PERFORMED_IN]->(target24)

WITH true AS ignored
MATCH (source25:Band {id: 'ドッグスター'})
MATCH (target25:City {id: '横浜'})
MERGE (source25)-[:PERFORMED_IN]->(target25)

WITH true AS ignored
MATCH (source26:Person {id: 'キアヌ・リーブス'})
MATCH (target26:MusicVideo {id: 'あふれる想い'})
MERGE (source26)-[:APPEARED_IN]->(target26)

WITH true AS ignored
MATCH (source27:MusicVideo {id: 'あふれる想い'})
MATCH (target27:Person {id: 'ポーラ・アブドゥル'})
MERGE (source27)-[:FEATURED_ARTIST]->(target27)

WITH true AS ignored
MATCH (source28:Person {id: 'キアヌ・リーブス'})
MATCH (target28:Hotel {id: '帝国ホテル'})
MERGE (source28)-[:FAVORITE_PLACE]->(target28)

WITH true AS ignored
MATCH (source29:Person {id: 'キアヌ・リーブス'})
MATCH (target29:Food {id: '味噌ラーメン'})
MERGE (source29)-[:FAVORITE_FOOD]->(target29)

WITH true AS ignored
MATCH (source30:Person {id: 'キアヌ・リーブス'})
MATCH (target30:Song {id: 'Love Will Tear Us Apart'})
MERGE (source30)-[:FAVORITE_SONG]->(target30)

WITH true AS ignored
MATCH (source31:Song {id: 'Love Will Tear Us Apart'})
MATCH (target31:Band {id: 'ジョイ・ディヴィジョン'})
MERGE (source31)-[:PERFORMED_BY]->(target31)

WITH true AS ignored
MATCH (source32:Person {id: 'キアヌ・リーブス'})
MATCH (target32:Brand {id: 'ノートン'})
MERGE (source32)-[:OWNS]->(target32)

WITH true AS ignored
MATCH (source33:Person {id: 'キアヌ・リーブス'})
MATCH (target33:Brand {id: 'ハーレー・ダヴィッドソン'})
MERGE (source33)-[:OWNS]->(target33)

WITH true AS ignored
MATCH (source34:Person {id: 'キアヌ・リーブス'})
MATCH (target34:Brand {id: 'ポルシェ'})
MERGE (source34)-[:OWNS]->(target34)

WITH true AS ignored
MATCH (source35:Person {id: 'キアヌ・リーブス'})
MATCH (target35:Company {id: 'Arch Motorcycle'})
MERGE (source35)-[:FOUNDED]->(target35)

WITH true AS ignored
MATCH (source36:Company {id: 'Arch Motorcycle'})
MATCH (target36:Place {id: '鈴鹿サーキット'})
MERGE (source36)-[:RACED_AT]->(target36)

WITH true AS ignored
MATCH (source37:Person {id: 'キアヌ・リーブス'})
MATCH (target37:Event {id: '鈴鹿8時間耐久ロードレース'})
MERGE (source37)-[:PARTICIPATED_IN]->(target37)

WITH true AS ignored
MATCH (source38:Event {id: '鈴鹿8時間耐久ロードレース'})
MATCH (target38:Place {id: '鈴鹿サーキット'})
MERGE (source38)-[:HELD_AT]->(target38)

WITH true AS ignored
MATCH (source39:Person {id: 'キアヌ・リーブス'})
MATCH (target39:Movie {id: 'リトル・ブッダ'})
MERGE (source39)-[:ACTED_IN]->(target39)

WITH true AS ignored
MATCH (source40:Person {id: 'キアヌ・リーブス'})
MATCH (target40:Religion {id: '仏教'})
MERGE (source40)-[:INTERESTED_IN]->(target40)
```

# Cypher 実行

Cypher を Neoj4 の管理画面で実行して、正しく実行できていることがわかりました。

Neo4j の管理画面

<img width="1677" height="638" alt="スクリーンショット 2025-08-03 14 32 00" src="https://github.com/user-attachments/assets/64c42613-84d0-4cf8-9b47-09d9d79af5f9" />


# まとめ

- LLM を使用して neo4j のデータを作成できることが確認できました
